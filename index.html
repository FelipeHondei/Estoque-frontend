<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Estoque - Projeto B</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <div class="branding">
        <span class="logo" aria-hidden="true">ðŸ›’</span>
        <h1>Projeto B Store</h1>
      </div>
      <div class="header-actions">
        <div class="api-config">
          <label>API:</label>
          <input
            id="apiBaseInput"
            placeholder="URL da API (ex: http://localhost:8000)"
          />
          <button id="saveApiBaseBtn" class="button">Salvar</button>
        </div>
        <button id="openCreateModal" class="button primary">
          Novo produto
        </button>
        <button id="openSaleModal" class="button success">Nova venda</button>
      </div>
    </header>

    <main>
      <section class="toolbar">
        <h2>Produtos</h2>
      </section>

      <section class="products-grid" id="products"></section>

      <section class="toolbar">
        <h2>Vendas</h2>
      </section>

      <section class="sales-section">
        <div class="sales-summary" id="salesSummary">
          <div class="summary-card">
            <h3>Resumo Financeiro (30 dias)</h3>
            <div class="summary-grid">
              <div class="summary-item">
                <span class="label">Vendas</span>
                <span class="value" id="totalSales">R$ 0,00</span>
              </div>
              <div class="summary-item">
                <span class="label">Custos</span>
                <span class="value" id="totalCosts">R$ 0,00</span>
              </div>
              <div class="summary-item">
                <span class="label">Lucro</span>
                <span class="value" id="totalProfit">R$ 0,00</span>
              </div>
              <div class="summary-item">
                <span class="label">Quantidade</span>
                <span class="value" id="totalSalesCount">0</span>
              </div>
            </div>
          </div>
        </div>
        <div class="sales-list" id="salesList"></div>
      </section>
    </main>

    <footer>
      <small>Projeto B â€¢ Estoque simples</small>
    </footer>

    <!-- Modal: Novo/Editar Produto -->
    <div id="createModal" class="modal hidden">
      <div class="modal-overlay" id="modalOverlay"></div>
      <div
        class="modal-content"
        role="dialog"
        aria-modal="true"
        aria-labelledby="modalTitle"
      >
        <button class="modal-close" id="closeCreateModal" aria-label="Fechar">
          Ã—
        </button>
        <h3 id="modalTitle">Cadastrar novo produto</h3>
        <form id="createForm" class="form-grid">
          <input type="hidden" id="editingId" />
          <label>Nome</label>
          <input name="name" required />
          <label>SKU</label>
          <input name="sku" required />
          <label>PreÃ§o de Custo</label>
          <input name="price" type="number" step="0.01" value="0" />
          <label>PreÃ§o de Venda</label>
          <input name="sale_price" type="number" step="0.01" value="0" />
          <label>Qtd. MÃ­nima</label>
          <input name="min_quantity" type="number" value="0" />
          <label>Estoque Inicial</label>
          <input name="initial_quantity" type="number" value="0" />
          <div class="modal-actions">
            <button type="button" class="button" id="cancelCreate">
              Cancelar
            </button>
            <button type="submit" class="button primary" id="saveButton">
              Salvar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal: Nova Venda -->
    <div id="saleModal" class="modal hidden">
      <div class="modal-overlay" id="saleModalOverlay"></div>
      <div
        class="modal-content large"
        role="dialog"
        aria-modal="true"
        aria-labelledby="saleModalTitle"
      >
        <button class="modal-close" id="closeSaleModal" aria-label="Fechar">
          Ã—
        </button>
        <h3 id="saleModalTitle">Nova Venda</h3>
        <form id="saleForm">
          <div class="sale-header">
            <div class="form-row">
              <div class="form-group">
                <label>Cliente</label>
                <input
                  name="customer_name"
                  required
                  placeholder="Nome do cliente"
                />
              </div>
              <div class="form-group">
                <label>Forma de Pagamento</label>
                <select name="payment_method" required>
                  <option value="">Selecione...</option>
                  <option value="dinheiro">Dinheiro</option>
                  <option value="cartÃ£o">CartÃ£o</option>
                  <option value="pix">PIX</option>
                  <option value="transferÃªncia">TransferÃªncia</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>ObservaÃ§Ãµes</label>
              <textarea
                name="notes"
                placeholder="ObservaÃ§Ãµes da venda..."
              ></textarea>
            </div>
          </div>

          <div class="sale-items">
            <h4>Itens da Venda</h4>
            <div id="saleItemsList" class="sale-items-container"></div>
            <button type="button" class="button" id="addSaleItem">
              + Adicionar Item
            </button>
          </div>

          <div class="sale-total">
            <div class="total-row">
              <span>Total da Venda:</span>
              <span id="saleTotal">R$ 0,00</span>
            </div>
          </div>

          <div class="modal-actions">
            <button type="button" class="button" id="cancelSale">
              Cancelar
            </button>
            <button type="submit" class="button success">
              Finalizar Venda
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
  </body>
</html>